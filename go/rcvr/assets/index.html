<!doctype html>
<html ng-app="cachesterApp">
  <head>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.0-beta.17/angular.min.js"></script>
    <script src="cachester.js"></script>
    <link rel="stylesheet" href="cachester.css">
  </head>
  <body>
    <h2>Cachester</h2>
    <div ng-controller="CachesterController">
      <form ng-submit="addHost()">
        <input type="text" ng-model="host"  size="30"
               placeholder="add new host here">
        <input class="btn-primary" type="submit" value="add">
        <span style="color:red">{{ lastError }}</span>
      </form>

<table style="width:400px" ng-controller="StatusController">
  <tr><td>
    <table style="width:400px">
    <tr>
      <th colspan="2"></th>
      <th colspan="3">Data Rate (s)</th>
      <th colspan="4">Multicast Latency (Âµs)</th>
      <th colspan="3">Total</th>
    </tr>
    <tr>
      <th>Source</th>
      <th>Gaps</th>
      <th>TCP Bytes</th> 
      <th>MCAST Packets</th>
      <th>MCAST Bytes</th>
      <th>Min</th>
      <th>Mean</th>
      <th>Max</th>
      <th>StdDev</th>
      <th>TCP Bytes</th> 
      <th>MCAST Bytes</th>
      <th>MCAST Packets</th>
    </tr>
     <tr ng-repeat="(host,rec) in alive" >
      <td>{{host}}<br/>
      {{rec.Description}}<br/>
        <a href="/s?reset={{host}}">reset</a>
        <button ng-click="removeHost(host)">Remove</button>
      </td>
      <td>{{rec.Stats.GapCount}}</td>
      <td>{{rec.Stats.TcpBytesSec | bytes}}</td> 
      <td>{{rec.Stats.MCastPacketsSec}}</td>
      <td>{{rec.Stats.MCastBytesSec | bytes}}</td>
      <td>{{rec.Stats.MCastMinLatency}}</td>
      <td>{{rec.Stats.MCastMeanLatency}}</td>
      <td>{{rec.Stats.MCastMaxLatency}}</td>
      <td>{{rec.Stats.MCastStdDevLatency | number:2 }}</td>
      <td>{{rec.Stats.TcpBytesRecv | bytes}}</td> 
      <td>{{rec.Stats.MCastBytesRecv | bytes}}</td>
      <td>{{rec.Stats.MCastPacketsRecv | number}}</td>
    </tr>
    </table>
  </td></tr>
  <tr ng-if="showDead" ><td>
    <table style="width:400px">
    <tr>
      <th>DEAD NODES</th>
    </tr>
    <tr ng-repeat="(host,rec) in dead" >
      <td>{{host}}<br/>
        <a href="/s?reset={{host}}">reset</a>
        <button ng-click="removeHost(host)">Remove</button>
      </td>
      <td>{{rec.Status}}</td>
    </tr>
    </table>
  </td></tr>
  </tr>
</table>
    </div>
  </body>
</html>